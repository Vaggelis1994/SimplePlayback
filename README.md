# SimplePlayback

A simple multi-source playback player

# Playback code challenge

# Implementation of the Player class

## Function: open()

The function creates two char* buffers in order to stream from the sources. Also, the two files used
for output data are defined here; audio_output.raw and realtime_stats.txt

samples are set to 72 which was computed as a good ratio for the data stream in order to achieve the
requested 48kHz frequency. In order to find this specific ratio, two tests were done:
1. dt->0 when the function networkReader::read() was used with different values for the requested bytes
2. according to stats file: the generated bytes was according to 48 stereo samples/millisecond = 48.000/second = 48kHz 

## Function: close()

simply closes the output files with the necessary checks

## Function: play()

streams data to audio_output.raw and realtime_stats.txt. The procedure is continuesly calls itself till 
all the bytes have been streamed from the two sources. The mix output is computed as the weighted sum 
of the two sources for each byte. Since, it was not explicitly mentioned whether the two file were 
of the same size two iterations take place. Nevertheless, these iterations could have been replaced by
the below one in case of same file size:
<
	//case for same size file
	int pos = 0;
	for (int i = 0; i < networkRead; ++i) {
		auto bit = networkLevel * (double) networkBuffer[i] + playerLevel * (double) playerBuffer[i]; //weighted sum computation
		mix[pos] = (char)bit; pos++;
		mix[pos] = (char)bit; pos++;
}
>
OR the below alternative
<
	        std::for_each(mix, mix+2*networkRead, computeMixingLevel(networkBuffer, networkLevel));
	        std::for_each(mix, mix+2*playerRead, computeMixingLevel(playerBuffer, playerLevel));
>
## Function: pause()

pauses the streaming. Due to the fact that this function was ambigiously stated on how to be implemented, a boolean variable is used to be checked in each execution of the ::play() and 
additionally, the specific chrono::millisecond and number_of_written_samples are saved. One thought of
further functionally implementing this function was with the use of getchar(); or any equivelant, in order to truly play and pause the console, corresponding to the way of how a real player would do.

## Function: setMixingLevel

set the level of mixing in the range of [-1, 1]. 
<
	networkLevel = (1.0 - level) / 2;
	playerLevel = (1.0 + level) / 2;
> 
Alwayes are set to the right value for weighted sum computation.

## private functions

these function were same as those of the networkReader::read(), corresponding to read() and networkReader::initWaveForm, corresponding to init().

# Tests 

test cases were implemented with GTest/GMock
